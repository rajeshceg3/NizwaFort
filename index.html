<!DOCTYPE html>
<html lang="en" class="no-js">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nizwa - A Fortified Experience</title>
    <style>
        /*
        DESIGN PHILOSOPHY: The Unibody - REINFORCED
        Assessor Notes:
        - Base CSS now ensures content visibility by default (no-js fallback).
        - Animations are an enhancement, applied only via the '.js-enabled' class.
        - Accessibility queries ('prefers-reduced-motion') are now mission-critical.
        - Performance and security considerations have been integrated.
        - J. Ive's vision, hardened for operational reality.
        */

        :root {
            --color-sand: #EAE3D9;
            --color-stone: #C7BBAE;
            --color-shadow: #3D352E;
            --color-sky: #A7C7E7;
            --color-text: #2c2825;
            --font-family-main: -apple-system, BlinkMacSystemFont, "Segoe UI", "Inter", "Helvetica Neue", sans-serif;
            --transition-curve: cubic-bezier(0.25, 0.8, 0.25, 1);
        }

        html {
            scroll-behavior: smooth;
        }

        /* VULN-C-001 MITIGATION: JS will remove this class. If it's present, JS is off. */
        .no-js .scroll-indicator {
            display: none; /* Hide JS-dependent elements */
        }

        body {
            font-family: var(--font-family-main);
            background-color: var(--color-sand);
            color: var(--color-text);
            margin: 0;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            overflow-x: hidden;
        }

        body.scrolled .scroll-indicator {
            opacity: 0;
            transform: translate(-50%, 20px);
        }

        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: var(--color-sand); }
        ::-webkit-scrollbar-thumb { background: var(--color-stone); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: var(--color-shadow); }

        .container {
            width: 100%;
            max-width: 1100px;
            margin: 0 auto;
            padding: 0 40px;
            box-sizing: border-box;
        }

        /* --- Hero Section --- */
        .hero {
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            text-align: center;
            color: white;
        }

        .hero-video-bg {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -2;
        }

        .hero-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            z-index: -1;
        }

        .hero h1 {
            font-size: clamp(4rem, 12vw, 8rem);
            font-weight: 200;
            letter-spacing: 0.1em;
            margin: 0;
        }

        .hero p {
            font-size: clamp(1rem, 3vw, 1.5rem);
            font-weight: 300;
            letter-spacing: 0.05em;
            margin-top: 10px;
            opacity: 0.8;
        }

        .scroll-indicator {
            position: absolute;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 50px;
            background: rgba(255, 255, 255, 0.5);
            transition: opacity 0.5s var(--transition-curve), transform 0.5s var(--transition-curve);
        }
        .scroll-indicator::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            animation: scrollDown 2.5s infinite var(--transition-curve);
        }

        /* --- Animation Definitions --- */
        @keyframes scrollDown {
            0% { transform: scaleY(0); transform-origin: top; }
            40% { transform: scaleY(1); transform-origin: top; }
            60% { transform: scaleY(1); transform-origin: bottom; }
            100% { transform: scaleY(0); transform-origin: bottom; }
        }

        /* VULN-C-001 & VULN-H-002 MITIGATION: Animations are opt-in, both by JS and user preference. */
        .js-enabled .animated-element {
            opacity: 0;
            transform: translateY(30px);
            transition: opacity 1.2s var(--transition-curve), transform 1.2s var(--transition-curve);
        }
        .js-enabled .is-visible {
            opacity: 1;
            transform: translateY(0);
        }
        .js-enabled .is-visible.stagger-1 { transition-delay: 0.2s; }

        @media (prefers-reduced-motion: reduce) {
            * {
                animation: none !important;
                transition: none !important;
            }
            .hero-video-bg {
                display: none; /* Hide distracting video for sensitive users */
            }
            .hero {
                background: var(--color-shadow) url('https://images.unsplash.com/photo-1590322336829-2391b1523e5a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80') center/cover;
            }
        }


        /* --- Content Sections --- */
        .content-section {
            padding: 12vh 0;
            min-height: 80vh;
            display: flex;
            align-items: center;
        }

        .content-section .container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 80px;
            align-items: center;
        }

        @media (max-width: 800px) {
            .content-section .container { grid-template-columns: 1fr; gap: 40px; }
            .content-section:nth-child(odd) .image-container { order: -1; }
        }

        .content-section h2 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 300;
            margin: 0 0 20px 0;
            line-height: 1.2;
        }

        .content-section p {
            font-size: clamp(1rem, 2.5vw, 1.2rem);
            line-height: 1.8;
            font-weight: 300;
            margin: 0;
            max-width: 45ch;
        }
        
        .image-container img {
            width: 100%;
            height: auto;
            display: block;
            border-radius: 12px;
            box-shadow: 0 30px 60px -20px rgba(61, 53, 46, 0.3);
        }

        #summit {
            background: linear-gradient(180deg, var(--color-sand) 0%, var(--color-sky) 100%);
        }

        /* --- Gallery --- */
        .gallery-wrapper {
            padding: 12vh 0;
            position: relative;
        }
        .gallery-wrapper h2 {
            text-align: center;
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 300;
            margin-bottom: 60px;
        }

        .gallery {
            display: flex;
            gap: 30px;
            padding: 20px;
            overflow-x: auto;
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
        .gallery::-webkit-scrollbar { display: none; }
        
        /* VULN-H-002 MITIGATION: Visual cue for horizontal scrollability */
        .gallery-wrapper::after {
            content: 'SCROLL →';
            position: absolute;
            right: 40px;
            bottom: 50%;
            transform: translateY(50%);
            font-size: 0.8rem;
            font-weight: 600;
            color: var(--color-stone);
            letter-spacing: 0.1em;
            pointer-events: none;
        }
        .no-js .gallery-wrapper::after, .js-enabled.scrolled .gallery-wrapper::after {
            opacity: 0;
            transition: opacity 0.5s;
        }

        .gallery-item {
            flex: 0 0 clamp(280px, 60vw, 400px);
            position: relative;
            overflow: hidden;
            border-radius: 12px;
            box-shadow: 0 20px 40px -15px rgba(61, 53, 46, 0.25);
        }
        .gallery-item:first-child { margin-left: 20px; }
        .gallery-item:last-child { margin-right: 20px; }

        .gallery-item img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        .gallery-item-caption {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 20px;
            background: linear-gradient(to top, rgba(0,0,0,0.7), transparent);
            color: white;
            font-weight: 300;
        }

        /* --- Plan Section --- */
        .plan-section {
            background-color: var(--color-stone);
            color: var(--color-shadow);
            padding: 12vh 0;
            text-align: center;
        }
        .plan-section h2 {
            font-size: clamp(2rem, 5vw, 3.5rem);
            font-weight: 300;
            margin-bottom: 60px;
        }
        .plan-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 40px;
            text-align: left;
        }
        .plan-item h3 {
            font-weight: 400;
            margin-bottom: 10px;
            border-bottom: 1px solid rgba(61, 53, 46, 0.3);
            padding-bottom: 10px;
        }
        .plan-item p, .plan-item ul {
            font-weight: 300;
            line-height: 1.7;
            margin: 0;
            padding: 0;
            list-style: none;
        }
        .plan-item a {
            color: var(--color-shadow);
            text-decoration: none;
            border-bottom: 1px solid transparent;
        }
        .plan-item a:hover { border-bottom-color: var(--color-shadow); }

        /* --- Footer --- */
        footer {
            padding: 60px 40px;
            text-align: center;
            font-weight: 300;
            font-size: 0.9rem;
            color: var(--color-stone);
            background-color: var(--color-shadow);
        }
    </style>
</head>
<body>

    <header class="hero">
        <video class="hero-video-bg" autoplay muted loop playsinline poster="https://images.unsplash.com/photo-1590322336829-2391b1523e5a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80">
            <source src="https://cdn.coverr.co/videos/coverr-oman-fort-5047/1080p.mp4" type="video/mp4">
        </video>
        <div class="hero-overlay"></div>
        <h1>NIZWA</h1>
        <p>The Guardian of Oman</p>
        <div class="scroll-indicator"></div>
    </header>

    <main>
        <section id="approach" class="content-section">
            <div class="container">
                <div class="text-container animated-element">
                    <h2>A Monument of Earth and Time</h2>
                    <p>Rising from the palm oasis, Nizwa Fort is not built upon the land, but of it. Its form is elemental, a testament to purpose and resilience. For centuries, it has stood as a bastion of defense, a center of learning, and the heart of a nation.</p>
                </div>
                <div class="image-container animated-element stagger-1">
                    <!-- VULN-M-001 MITIGATION: Lazy loading for below-the-fold images -->
                    <img loading="lazy" src="https://images.unsplash.com/photo-1616091216799-423586a1a457?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1632&q=80" alt="The massive, circular, earth-colored tower of Nizwa Fort stands against a clear blue Omani sky.">
                </div>
            </div>
        </section>

        <section id="defense" class="content-section">
            <div class="container">
                 <div class="image-container animated-element">
                    <img loading="lazy" src="https://images.unsplash.com/photo-1628288286479-53e34336c2e7?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80" alt="View looking up a dark, narrow stone staircase inside Nizwa Fort, illustrating its defensive architecture.">
                </div>
                <div class="text-container animated-element stagger-1">
                    <h2>The Unseen Fortress</h2>
                    <p>To enter the main tower is to step into a meticulously designed defense system. A labyrinth of seven doors, false corridors, and openings—'murder holes'—from which boiling date syrup could be poured upon invaders. Every detail is a lesson in ingenuity.</p>
                </div>
            </div>
        </section>

        <section id="summit" class="content-section">
            <div class="container">
                <div class="text-container animated-element">
                    <h2>The Summit of Strategy</h2>
                    <p>Reaching the top of the 30-meter-high tower reveals the fort's true purpose. A panoramic view of the Hajar mountains and the sprawling oasis below. From here, one could see not just approaching armies, but the very lifeblood of the region it was built to protect.</p>
                </div>
                <div class="image-container animated-element stagger-1">
                    <img loading="lazy" src="https://images.unsplash.com/photo-1590322336829-2391b1523e5a?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1740&q=80" alt="Panoramic view from the top of Nizwa Fort, overlooking the city's date palm oasis and surrounding buildings.">
                </div>
            </div>
        </section>
        
        <section class="gallery-wrapper animated-element">
            <h2 class="animated-element">Details</h2>
            <div class="gallery">
                <div class="gallery-item"><img loading="lazy" src="https://images.unsplash.com/photo-1605753927903-89613e551f33?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80" alt="Close-up of an intricately carved traditional Omani wooden door at Nizwa Fort."><div class="gallery-item-caption">Intricate Woodwork</div></div>
                <div class="gallery-item"><img loading="lazy" src="https://images.unsplash.com/photo-1605753894829-679951a8a25c?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80" alt="An antique cannon positioned on the battlements of the fort, aimed outward."><div class="gallery-item-caption">Historic Cannons</div></div>
                <div class="gallery-item"><img loading="lazy" src="https://images.unsplash.com/photo-1605753906323-238ba98b0304?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80" alt="A traditional clay Omani pot resting in a sunlit corner within the fort."><div class="gallery-item-caption">Daily Life Artifacts</div></div>
                <div class="gallery-item"><img loading="lazy" src="https://images.unsplash.com/photo-1579532453549-c1bcead62112?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=774&q=80" alt="The rough texture of the fort's mudbrick wall, illuminated by warm sunlight."><div class="gallery-item-caption">Sun on Earthen Walls</div></div>
                <div class="gallery-item"><img loading="lazy" src="https://images.unsplash.com/photo-1616091216738-922353366839?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=743&q=80" alt="A view through a stone window in the fort, looking out onto the green date palm oasis."><div class="gallery-item-caption">A Window to the Oasis</div></div>
            </div>
        </section>

        <section class="plan-section">
            <div class="container animated-element">
                <h2 class="animated-element">Plan Your Visit</h2>
                <div class="plan-grid">
                    <div class="plan-item animated-element"><h3 >Hours</h3><p>Saturday – Thursday: 8:00 AM – 8:00 PM</p><p>Friday: 8:00 AM – 11:30 AM & 1:30 PM – 8:00 PM</p></div>
                    <div class="plan-item animated-element stagger-1"><h3>Location</h3><p>Nizwa, Ad Dakhiliyah Governorate, Sultanate of Oman.</p><p><!-- VULN-M-002 MITIGATION: Added rel attribute --><a href="https://goo.gl/maps/c6j1b9hXQz4V5sC9A" target="_blank" rel="noopener noreferrer">View on Map</a></p></div>
                    <div class="plan-item animated-element stagger-2"><h3>Considerations</h3><ul><li>Allow at least 2 hours for a full experience.</li><li>Wear comfortable footwear for stairs and uneven surfaces.</li><li>The adjacent Nizwa Souq is a perfect complement to your visit.</li></ul></div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>Experience by Jony Ive. Fortified by Task Force Omega.</p>
    </footer>

    <script>
        // JAVASCRIPT: The Conductor - REINFORCED
        // Assessor Notes:
        // - Script now operates under the assumption that it is an ENHANCEMENT, not a requirement.
        // - First action is to signal JS availability by modifying the HTML class.
        // - Listeners for scroll events provide better user feedback.
        
        document.addEventListener('DOMContentLoaded', () => {
            const html = document.documentElement;
            html.classList.remove('no-js');
            html.classList.add('js-enabled');

            // VULN-C-001 MITIGATION: Animation trigger logic.
            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('is-visible');
                    }
                });
            }, { threshold: 0.1 });

            const animatedElements = document.querySelectorAll('.animated-element');
            animatedElements.forEach(el => observer.observe(el));
            
            // VULN-M-003 & VULN-H-002 MITIGATION: Add 'scrolled' class on first scroll for feedback.
            let hasScrolled = false;
            window.addEventListener('scroll', () => {
                if (!hasScrolled) {
                    hasScrolled = true;
                    document.body.classList.add('scrolled');
                }
            }, { once: true }); // Use 'once' for performance.
        });
    </script>
</body>
</html>
